---
import { getCollection } from 'astro:content'

import AppLayout from '@/layouts/app-layout.astro';

import Hero from '@/components/home/hero.astro';
import Portfolio from '@/components/home/portfolio.astro';
import RecentPosts from '@/components/home/recent-posts.astro';
import Newsletter from '@/components/newsletter.astro';

import { config } from '@/utils/config';
import { availableCollections } from '@/content/config';

const { title, description } = config;

const posts = (await getCollection(availableCollections.blog))
  .sort((a, b) => b.data.publishedAt.valueOf() - a.data.publishedAt.valueOf())
  .slice(0, 3);
---

<AppLayout head={{ title, description }}>
  <Hero />
  <Portfolio />
  <RecentPosts posts={posts} />
  <Newsletter />
</AppLayout>
